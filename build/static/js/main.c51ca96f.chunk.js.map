{"version":3,"sources":["logo.svg","Components/TransactionRow.js","firebase.js","Components/CreateModal.js","App.js","reportWebVitals.js","index.js"],"names":["TransactionRow","props","tx","onDeleteItem","className","css","src","imageUrl","alt","category","id","date","amount","toLocaleString","onClick","console","log","message","success","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","googleProvider","GoogleAuthProvider","db","getFirestore","storage","getStorage","CreateModal","visible","onCreate","onClose","useState","setCategory","setDate","setAmount","setImageUrl","useEffect","title","onOk","type","includes","onCancel","placeholder","value","onChange","e","Option","format","target","files","file","storageRef","ref","name","hide","loading","uploadBytes","then","result","getDownloadURL","url","PageContainer","styled","div","PageContent","FlexBox","App","createModalVisible","setCreateModalVisible","loginModalVisible","setLoginModalVisible","transactions","setTransactions","user","setUser","search","setSearch","createTransaction","a","transaction","ownerId","uid","addDoc","collection","queryDB","query","where","onSnapshot","querySnapshot","forEach","doc","data","push","auth","getAuth","onAuthStateChanged","deleteDoc","filteredTransaction","filter","displayName","signOut","response","length","map","signInWithPopup","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c51ca96f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { css } from \"@emotion/css\";\nimport { message } from \"antd\";\n\nexport const TransactionRow = (props) => {\n  const { tx, onDeleteItem } = props;\n  return (\n    <div\n      className={css`\n        display: flex;\n        background-color: white;\n        /* height: 60px; */\n        width: 100%;\n        margin-top: 24px;\n        border-radius: 8px;\n        padding: 16px;\n        align-items: center;\n        h2,\n        h4 {\n          margin: 0;\n        }\n      `}\n    >\n      <div\n        className={css`\n          background-color: green;\n          margin-right: 16px;\n          border-radius: 50%;\n          width: 80px;\n          overflow: hidden;\n          flex-shrink: 0;\n        `}\n      >\n        <img\n          src={tx.imageUrl}\n          alt=\"TxImage\"\n          className={css`\n            width: 80px;\n            height: 80px;\n          `}\n        />\n      </div>\n      <div\n        className={css`\n          flex-shrink: 0;\n        `}\n      >\n        <h2>{tx.category}</h2>\n        <h3>{tx.id}</h3>\n        <h4>{tx.date}</h4>\n      </div>\n      <div\n        className={css`\n          display: flex;\n          justify-content: flex-end;\n          width: 100%;\n          color: ${tx.amount > 0 ? \"green\" : \"red\"};\n        `}\n      >\n        {tx.amount.toLocaleString()}\n      </div>\n      <div\n        className={css`\n          margin-left: 16px;\n        `}\n      >\n        <div\n          className={css`\n            width: 32px;\n            height: 32px;\n            background-color: gray;\n            border-radius: 8px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            cursor: pointer;\n          `}\n          onClick={() => {\n            console.log(tx);\n            onDeleteItem(tx.id);\n            message.success(\"Delete item :\" + tx.id);\n          }}\n        >\n          X\n        </div>\n      </div>\n    </div>\n  );\n};\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\nimport { GoogleAuthProvider } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAYqwzMfoRzlTndmxi63jMWbZdOKb0FTdI\",\n  authDomain: \"mern-project-a39d6.firebaseapp.com\",\n  projectId: \"mern-project-a39d6\",\n  storageBucket: \"mern-project-a39d6.appspot.com\",\n  messagingSenderId: \"205581707458\",\n  appId: \"1:205581707458:web:70e87327e2ad3c108f735b\",\n};\n\n// Initialize Firebase\nexport const app = initializeApp(firebaseConfig);\nexport const googleProvider = new GoogleAuthProvider();\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n","import { css } from \"@emotion/css\";\nimport { DatePicker, Input, message, Modal, Select } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { storage } from \"../firebase\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nexport const CreateModal = (props) => {\n  const { visible, onCreate, onClose } = props;\n  const [category, setCategory] = useState(\"Shopping\");\n  const [date, setDate] = useState();\n  const [amount, setAmount] = useState();\n  const [imageUrl, setImageUrl] = useState(\"\");\n\n  useEffect(() => {\n    setCategory(\"Shopping\");\n    setDate();\n    setAmount();\n  }, []);\n\n  return (\n    <Modal\n      title=\"Create Transaction\"\n      visible={visible}\n      onOk={() => {\n        const incomeCategory = [\"Salary\"];\n        const type = incomeCategory.includes(category) ? \"income\" : \"expense\";\n        const newTx = {\n          type,\n          category,\n          date,\n          imageUrl,\n          amount: type === \"expense\" ? amount * -1 : amount,\n        };\n        onCreate(newTx);\n      }}\n      onCancel={() => {\n        onClose();\n      }}\n    >\n      <div\n        className={css`\n          display: flex;\n          flex-direction: column;\n          height: 150px;\n          justify-content: space-between;\n        `}\n      >\n        <Select\n          placeholder=\"Select your category\"\n          value={category}\n          onChange={(e) => {\n            setCategory(e);\n          }}\n        >\n          <Select.Option value=\"Shopping\">Shopping</Select.Option>\n          <Select.Option value=\"Salary\">Salary</Select.Option>\n        </Select>\n        <DatePicker\n          onChange={(e) => {\n            setDate(e.format(\"DD MMM YYYY\"));\n          }}\n        />\n        <Input\n          value={amount}\n          placeholder=\"Input Amount\"\n          type=\"number\"\n          onChange={(e) => {\n            setAmount(e.target.value);\n          }}\n        />\n        <input\n          type=\"file\"\n          onChange={(e) => {\n            console.log(e.target.files);\n            const file = e.target.files[0];\n            const storageRef = ref(storage, `images/${file.name}`);\n            const hide = message.loading(\"uploading image\");\n            uploadBytes(storageRef, file).then((result) => {\n              console.log(result);\n              getDownloadURL(result.ref).then((url) => {\n                hide();\n                message.success(\"image upload success\");\n                setImageUrl(url);\n              });\n            });\n          }}\n        />\n      </div>\n    </Modal>\n  );\n};\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport \"antd/dist/antd.css\";\nimport { css } from \"@emotion/css\";\nimport { Modal, Button, Input, Select, DatePicker } from \"antd\";\nimport { TransactionRow } from \"./Components/TransactionRow\";\nimport { useEffect, useState } from \"react\";\nimport { CreateModal } from \"./Components/CreateModal\";\nimport styled from \"@emotion/styled\";\nimport { googleProvider, db } from \"./firebase\";\nimport {\n  getDocs,\n  collection,\n  addDoc,\n  deleteDoc,\n  doc,\n  onSnapshot,\n  query,\n  where,\n} from \"firebase/firestore\";\nimport {\n  signInWithPopup,\n  getAuth,\n  onAuthStateChanged,\n  signOut,\n} from \"firebase/auth\";\n\nconst PageContainer = styled.div`\n  background-color: aliceblue;\n  height: 100vh;\n  width: 100vw;\n  padding-top: 100px;\n`;\n\nconst PageContent = styled.div`\n  width: 80%;\n  margin: auto;\n  max-width: 500px;\n`;\n\nconst FlexBox = styled.div`\n  display: flex;\n`;\n\nfunction App() {\n  const [createModalVisible, setCreateModalVisible] = useState(false);\n  const [loginModalVisible, setLoginModalVisible] = useState(false);\n  const [transactions, setTransactions] = useState([]);\n  const [user, setUser] = useState();\n  const [search, setSearch] = useState(\"\");\n\n  // const fetchTransactions = async () => {\n  //   const querySnapshot = await getDocs(collection(db, \"transactions\"));\n  //   let transactions = [];\n  //   querySnapshot.forEach((doc) => {\n  //     console.log(doc.id);\n  //     const transaction = { id: doc.id, ...doc.data() };\n  //     transactions.push(transaction);\n  //   });\n  //   setTransactions(transactions);\n  // };\n\n  const createTransaction = async (tx) => {\n    const transaction = {\n      ownerId: user.uid,\n      ...tx,\n    };\n    console.log(transaction);\n    const response = await addDoc(collection(db, \"transactions\"), transaction);\n  };\n\n  useEffect(() => {\n    if (user) {\n      const queryDB = query(\n        collection(db, \"transactions\"),\n        where(\"ownerId\", \"==\", user.uid)\n      );\n      onSnapshot(queryDB, (querySnapshot) => {\n        let transactions = [];\n        querySnapshot.forEach((doc) => {\n          console.log(doc.id);\n          const transaction = { id: doc.id, ...doc.data() };\n          transactions.push(transaction);\n        });\n        setTransactions(transactions);\n      });\n    }\n  }, [user]);\n\n  useEffect(() => {\n    const auth = getAuth();\n    onAuthStateChanged(auth, (data) => {\n      setUser(data);\n    });\n    // fetchTransactions();\n  }, []);\n\n  const onDeleteItem = async (id) => {\n    console.log(id);\n    const deletedResponse = await deleteDoc(doc(db, \"transactions\", id));\n    // setTransactions(transactions.filter((tx) => tx.id !== id));\n  };\n\n  const filteredTransaction = transactions.filter((tx) =>\n    tx.category.includes(search)\n  );\n\n  return (\n    <PageContainer>\n      <div\n        className={css`\n          display: flex;\n          width: 100%;\n          background-color: white;\n          position: fixed;\n          top: 0;\n          justify-content: flex-end;\n          padding: 16px;\n          z-index: 10;\n        `}\n      >\n        {user ? (\n          <div>\n            {user.displayName}{\" \"}\n            <Button\n              onClick={async () => {\n                const auth = getAuth();\n                const response = await signOut(auth);\n                console.log(response);\n                setUser();\n              }}\n            >\n              SignOut\n            </Button>\n          </div>\n        ) : (\n          <Button\n            onClick={() => {\n              setLoginModalVisible(true);\n            }}\n          >\n            Login\n          </Button>\n        )}\n      </div>\n      <PageContent>\n        <FlexBox>\n          <Input\n            placeholder=\"Search by text\"\n            onChange={(e) => {\n              setSearch(e.target.value);\n            }}\n          />\n          <Button onClick={() => setCreateModalVisible(true)}>Create</Button>\n        </FlexBox>\n        {transactions.length === 0 ? (\n          <FlexBox\n            className={css`\n              padding-top: 3rem;\n              justify-content: center;\n            `}\n          >\n            <h1>No data</h1>\n          </FlexBox>\n        ) : (\n          \"\"\n        )}\n        {filteredTransaction.map((tx) => (\n          <TransactionRow tx={tx} onDeleteItem={onDeleteItem} />\n        ))}\n      </PageContent>\n      <Modal\n        title=\"Login\"\n        visible={loginModalVisible}\n        onOk={() => {\n          setLoginModalVisible(false);\n        }}\n        onCancel={() => {\n          setLoginModalVisible(false);\n        }}\n      >\n        <Button\n          onClick={() => {\n            const auth = getAuth();\n            signInWithPopup(auth, googleProvider).then((data) => {\n              console.log(data);\n              setUser(data.user);\n              setLoginModalVisible(false);\n            });\n          }}\n        >\n          Login by GMAIL\n        </Button>\n      </Modal>\n      <CreateModal\n        visible={createModalVisible}\n        onCreate={async (tx) => {\n          await createTransaction(tx);\n          // setTransactions([...transactions, tx]);\n          setCreateModalVisible(false);\n        }}\n        onClose={() => setCreateModalVisible(false)}\n      />\n    </PageContainer>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}